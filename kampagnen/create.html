<!DOCTYPE html> 
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title> Kampagne erstellen</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #e3e6e9;
      color: #333;
      margin: 0;
      padding: 0;
      background-size: cover;
      background-position: center;
    }
    .container {
      max-width: 850px;
      margin: 60px auto;
      background-color: rgba(255, 255, 255, 0.9);
      padding: 40px;
      border-radius: 16px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      position: relative;
    }
    h1 {
      text-align: center;
      color: #5cc0e7;
      margin-bottom: 40px;
      font-size: 2rem;
      font-weight: 700;
      text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.1);
    }
    label {
      display: block;
      margin-top: 20px;
      font-weight: 500;
      color: #34495e;
    }
    input[type="text"],
input[type="date"],
input[type="email"],
textarea,
select {
  width: 100%;
  padding: 12px;
  border: 1px solid #cbcecf;
  border-radius: 12px;
  margin-top: 8px;
  font-size: 1rem;
  background-color: #ffffff;
  transition: border-color 0.3s ease;
}

input[type="text"]:focus,
input[type="date"]:focus,
input[type="email"]:focus,
textarea:focus,
select:focus {
  border-color: #6c5ce7;
}

    .zielgruppen-options {
      margin-top: 10px;
      display: flex;
      gap: 20px;
      align-items: center;
    }
    .zielgruppen-options input {
      width: auto;
    }
    .hidden {
      display: none;
    }
    .button {
      background-color: #f27121;
      color: #fff;
      padding: 14px 22px;
      border: none;
      border-radius: 10px;
      font-size: 1rem;
      margin-top: 30px;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s;
    }
    .button:hover {
      background-color: #4834d4;
      transform: scale(1.05);
    }
    .subsection {
      margin-top: 15px;
      padding: 15px;
      background-color: #f9f9ff;
      border: 1px solid #dcdde1;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Kampagne erstellen</h1>
    <form action="save_campaign.php" method="POST">

      <label for="language">Sprache der Nachricht</label>
      <select id="language" name="language" onchange="handleKampagnentypChange()" aria-label="Sprache">
        <option value="de" selected>Deutsch</option>
        <option value="en">Englisch</option>
      </select>

      <label>Zielgruppe wÃ¤hlen:</label>
      <div class="zielgruppen-options">
        <input type="radio" id="gruppe" name="zielgruppe_typ" value="gruppe" checked onclick="toggleZielgruppe('gruppe')">
        <label for="gruppe">Gruppe</label>
        <input type="radio" id="individuell" name="zielgruppe_typ" value="individuell" onclick="toggleZielgruppe('individuell')">
        <label for="individuell">Individuell</label>
      </div>

      <div id="gruppe_fields" class="subsection">
        <label for="kategorie">Kundengruppe</label>
        <select id="kategorie" name="kategorie" aria-label="Kundengruppe">
          <option value="tier_a">Tier A Kunden</option>
          <option value="tier_b">Tier B Kunden</option>
          <option value="tier_c">Tier C Kunden</option>
        </select>
      </div>

      <div id="individuell_fields" class="subsection hidden">
        <label for="kunden_id">Kunden-ID</label>
        <input type="text" id="kunden_id" name="kunden_id" maxlength="8"
               pattern="^[A-Za-z]{2}[0-9]{6}$"
               title="Die ID muss mit 2 Buchstaben und 6 Ziffern enden (z.â€¯B. AB123456)"
               aria-label="Kunden-ID">

        <label for="email">E-Mail Adresse</label>
        <input type="email" id="email" name="email" required placeholder="z.â€¯B. max@example.com" aria-label="E-Mail">
      </div>

      <label for="kampagnenkategorie">Kampagnenkategorie</label>
      <select id="kampagnenkategorie" onchange="filterKampagnenTypen()" aria-label="Kampagnenkategorie">
        <option value="">Bitte wÃ¤hlen</option>
        <option value="ereignis">ğŸ“… Ereigniskampagne</option>
        <option value="zeit">â° Zeitkampagne</option>
        <option value="benutzerdefiniert">âš™ï¸ Benutzerdefiniert</option>
      </select>

      <div id="kampagnentyp_wrapper" class="subsection hidden">
        <label for="kampagnentyp">Kampagnentyp</label>
        <select name="kampagnentyp" id="kampagnentyp" onchange="handleKampagnentypChange()" required aria-label="Kampagnentyp"></select>
      </div>

      <label for="startdatum">Startdatum</label>
      <input type="date" id="startdatum" name="startdatum" required aria-label="Startdatum">

      <label for="enddatum">Enddatum</label>
      <input type="date" id="enddatum" name="enddatum" required aria-label="Enddatum">

      <label for="betreff">Betreff</label>
      <input type="text" id="betreff" name="betreff" required aria-label="Betreff" />

      <label for="nachricht">Nachricht</label>
      <textarea id="nachricht" name="nachricht" rows="4" required aria-label="Nachricht"></textarea>

      <input type="hidden" name="action" id="formAction" value="save_only">
      <button type="submit" class="button" onclick="setFormAction('save_only')">Kampagne senden</button>
    </form>
  </div>
</body>
</html>

<!-- JavaScript for dynamic behavior -->
<script>
  const kampagnenTypen = {
    ereignis: {
      birthday: "ğŸ‚ Geburtstag",
      product_launch: "ğŸ“ˆ ProdukteinfÃ¼hrung",
      anniversary: "ğŸŒŸ JubilÃ¤um",
      grand_opening: "ğŸ¢ NeuerÃ¶ffnung",
      sponsorship: "ğŸ† Sponsoring",
      contest: "ğŸ… Wettbewerb",
      partnership: "ğŸ‘¥ Kooperation"
    },
    zeit: {
      christmas: "ğŸ„ Weihnachten",
      easter: "ğŸ£ Ostern",
      valentines: "ğŸ’• Valentinstag",
      black_friday: "ğŸ›ï¸ Black Friday",
      new_year: "ğŸ† Neujahr",
      back_to_school: "ğŸ« Back to School / Uni",
      seasonal: "ğŸŒŒ Saisonal"
    },
    benutzerdefiniert: {
      custom: "âš™ï¸ Benutzerdefiniert"
    }
  };

  function handleKampagnentypChange() {
    const typ = document.getElementById("kampagnentyp").value;
    const lang = document.getElementById("language").value;
    const subject = document.getElementById("betreff");
    const message = document.getElementById("nachricht");

    const entry = data[lang][typ];
    if (typ === "custom") {
      subject.value = "";
      message.value = "";
      return;
    }
    if (entry) {
      subject.value = entry[0];
      message.value = entry[1];
    }
  }

  function filterKampagnenTypen() {
    const kategorie = document.getElementById("kampagnenkategorie").value;
    const kampagnentypSelect = document.getElementById("kampagnentyp");
    const wrapper = document.getElementById("kampagnentyp_wrapper");

    kampagnentypSelect.innerHTML = "";
    wrapper.classList.toggle("hidden", !kategorie);

    if (!kategorie || !kampagnenTypen[kategorie]) return;

    const options = kampagnenTypen[kategorie];
    for (const key in options) {
      const opt = document.createElement("option");
      opt.value = key;
      opt.textContent = options[key];
      kampagnentypSelect.appendChild(opt);
    }

    handleKampagnentypChange();
  }

  
    const data = {
      de: {
        birthday: ["Alles Gute zum Geburtstag! ğŸ‚", "Feiern Sie mit uns â€“ entdecken Sie Ihr exklusives Geburtstagsangebot!"],
        product_launch: ["Produktneuheit entdecken! ğŸ“ˆ", "Wir prÃ¤sentieren unsere neueste Innovation â€“ jetzt mehr erfahren!"],
        anniversary: ["Wir feiern JubilÃ¤um! ğŸŒŸ", "Danke fÃ¼r Ihre Treue! Entdecken Sie unsere JubilÃ¤umsangebote."],
        grand_opening: ["NeuerÃ¶ffnung! ğŸ¢", "Besuchen Sie unsere neue Filiale und sichern Sie sich ErÃ¶ffnungsrabatte!"],
        sponsorship: ["Wir unterstÃ¼tzen Events! ğŸ†", "Jetzt mehr Ã¼ber unsere aktuellen Sponsoring-AktivitÃ¤ten erfahren."],
        contest: ["Mitmachen & Gewinnen! ğŸ…", "Nehmen Sie an unserem Gewinnspiel teil und sichern Sie sich tolle Preise!"],
        partnership: ["Neue Kooperation! ğŸ‘¥", "Gemeinsam stÃ¤rker â€“ entdecken Sie unsere neue Partnerschaft."],
  
        christmas: ["Frohe Weihnachten! ğŸ„", "Wir haben ein Geschenk fÃ¼r Sie: 25â€¯% Rabatt auf alle Buchungen bis zum 24. Dezember! Jetzt buchen und sparen!"],
        easter: ["Frohe Ostern! ğŸ£", "Sichern Sie sich unser Ostergeschenk â€“ exklusive FrÃ¼hjahrsangebote fÃ¼r Sie."],
        valentines: ["Happy Valentinstag ğŸ’•", "Liebe schenken: 20% Rabatt auf alle Lieblingsprodukte fÃ¼r Ihre Liebsten."],
        black_friday: ["Black Friday Deals ğŸ›ï¸", "Nur fÃ¼r kurze Zeit: Mega-Rabatte auf unser gesamtes Sortiment."],
        new_year: ["Willkommen 2025! ğŸ†", "Starten Sie erfolgreich ins neue Jahr mit unseren exklusiven Angeboten."],
        back_to_school: ["Back to School/Uni ğŸ“š", "Zum Semesterstart: Alles, was Sie brauchen â€“ jetzt entdecken!"]
      },
      en: {
        birthday: ["Happy Birthday! ğŸ‚", "Celebrate with us â€“ discover your exclusive birthday offer!"],
        product_launch: ["New Product Launch! ğŸ“ˆ", "Introducing our latest innovation â€“ check it out now!"],
        anniversary: ["We're Celebrating! ğŸŒŸ", "Thanks for your loyalty â€“ enjoy our anniversary offers!"],
        grand_opening: ["Grand Opening! ğŸ¢", "Visit our new location and enjoy opening discounts!"],
        sponsorship: ["We Support Events! ğŸ†", "Learn more about our current sponsorships."],
        contest: ["Join & Win! ğŸ…", "Take part in our contest and win great prizes!"],
        partnership: ["New Partnership! ğŸ‘¥", "Stronger together â€“ explore our new collaboration."],
  
        christmas: ["Merry Christmas! ğŸ„", "Enjoy the festive season with 25% off all bookings until December 24th. Book now and save!"],
        easter: ["Happy Easter! ğŸ£", "Treat yourself to our Easter deals â€“ spring into savings!"],
        valentines: ["Valentine's Day ğŸ’•", "Share the love: 20% off selected gifts for your special someone."],
        black_friday: ["Black Friday Deals ğŸ›ï¸", "Only for a short time: Huge discounts on everything you love."],
        new_year: ["Welcome 2025! ğŸ†", "Kick off the new year with exclusive offers just for you."],
        back_to_school: ["Back to School / Uni ğŸ“š", "Get ready for the semester with our best essentials."]
      }
    };
  
   
  
  
  function setSeasonalMessage() {
    const season = document.getElementById("season_select").value;
    const language = document.getElementById("language").value;
    const subject = document.getElementById("betreff");
    const message = document.getElementById("nachricht");
  
    const seasons = {
      de: {
        spring: ["FrÃ¼hlingsgrÃ¼ÃŸe! ğŸŒ¸", "Entdecken Sie unsere neuen FrÃ¼hlingsangebote und starten Sie frisch in die Saison."],
        summer: ["Sommer, Sonne, Angebote! â˜€ï¸", "Jetzt coole Sommer-Deals entdecken â€“ nur fÃ¼r kurze Zeit!"],
        autumn: ["Goldener Herbst ğŸ‚", "Starke Angebote fÃ¼r stÃ¼rmische Tage â€“ jetzt sparen!"],
        winter: ["Winterwunderland â„ï¸", "HeiÃŸe Preise fÃ¼r kalte Tage â€“ entdecken Sie unsere Winter-Highlights!"]
      },
      en: {
        spring: ["Spring Greetings! ğŸŒ¸", "Fresh offers for a fresh season â€“ explore now!"],
        summer: ["Summer Vibes â˜€ï¸", "Enjoy hot summer deals â€“ for a limited time only!"],
        autumn: ["Golden Autumn ğŸ‚", "Great savings for cozy days â€“ discover now!"],
        winter: ["Winter Wonderland â„ï¸", "Hot deals for cold days â€“ explore our best winter picks!"]
      }
    };
  
    const entry = seasons[language][season];
    if (entry) {
      subject.value = entry[0];
      message.value = entry[1];
    }
  }
  
  document.getElementById("kategorie").addEventListener("change", function () {
    const value = this.value;
    const language = document.getElementById("language").value;
    const subject = document.getElementById("betreff");
    const message = document.getElementById("nachricht");
  
    const segments = {
      de: {
        tier_a: ["Exklusiv fÃ¼r Sie â€“ Unsere Top-Kunden", "Als Tier A Kunde genieÃŸen Sie besondere Vorteile. Heute schenken wir Ihnen 15â€¯% Rabatt auf Ihre nÃ¤chste Buchung!"],
        tier_b: ["DankeschÃ¶n fÃ¼r Ihre Treue", "Profitieren Sie als treuer Kunde von 10â€¯% Rabatt auf Ihre nÃ¤chste Bestellung."],
        tier_c: ["Willkommen zurÃ¼ck!", "Wir haben Sie vermisst â€“ jetzt 20â€¯% Rabatt fÃ¼r Ihr Comeback!"]
      },
      en: {
        tier_a: ["Exclusive Benefits for You", "As a Tier A customer, enjoy 15% off your next booking â€“ just for you!"],
        tier_b: ["Thanks for Your Loyalty", "As a loyal customer, get 10% off your next order."],
        tier_c: ["We Miss You!", "Come back now and enjoy 20% off as a welcome gift!"]
      }
    };
  
    if (segments[language][value]) {
      subject.value = segments[language][value][0];
      message.value = segments[language][value][1];
    }
  });
  
  document.addEventListener("DOMContentLoaded", function () {
    handleKampagnentypChange();
  });
  
  function toggleZielgruppe(type) {
    document.getElementById("gruppe_fields").classList.toggle("hidden", type !== 'gruppe');
    document.getElementById("individuell_fields").classList.toggle("hidden", type !== 'individuell');
  }

  document.addEventListener("DOMContentLoaded", function () {
    filterKampagnenTypen();
    handleKampagnentypChange();

    // Startdatum: Heute als Minimum
    document.getElementById("startdatum").min = new Date().toISOString().split("T")[0];
  });

  document.querySelector("form").addEventListener("submit", function(e) {
    const kundenTyp = document.querySelector('input[name="zielgruppe_typ"]:checked').value;

    if (kundenTyp === "individuell") {
      const kundenIdInput = document.getElementById("kunden_id");
      const kundenId = kundenIdInput.value.trim();
      const kundenIdRegex = /^[A-Za-z]{2}[0-9]{6}$/;
      if (!kundenIdRegex.test(kundenId)) {
        alert("Die Kunden-ID muss mit 2 Buchstaben beginnen, gefolgt von 6 Ziffern (z.â€¯B. AB123456).");
        kundenIdInput.focus();
        e.preventDefault();
        return;
      }

      const emailInput = document.getElementById("email");
      const email = emailInput.value.trim();
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert("Bitte gib eine gÃ¼ltige E-Mail-Adresse ein (z.â€¯B. max@example.com).");
        emailInput.focus();
        e.preventDefault();
        return;
      }
    }

    const startDateStr = document.getElementById("startdatum").value;
    const endDateStr = document.getElementById("enddatum").value;

    if (startDateStr && endDateStr) {
      const start = new Date(startDateStr);
      const end = new Date(endDateStr);

      if (end < start) {
        alert("Das Enddatum darf nicht vor dem Startdatum liegen.");
        document.getElementById("enddatum").focus();
        e.preventDefault();
        return;
      }
    }

    const kampagnentyp = document.getElementById("kampagnentyp").value;
    if (!kampagnentyp) {
      alert("Bitte wÃ¤hle einen Kampagnentyp.");
      document.getElementById("kampagnentyp").focus();
      e.preventDefault();
    }
  });
</script>
</body>
</html>  

